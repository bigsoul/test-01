## Для Людей и ChatGPT: Техническое задание на разработку и сопровождение проекта для ChatGPT

## Для людей:
Данный проект является открытым исследованием возможностей разработки программного обеспечения через техническое задание для ChatGPT. Проект интегрирует платформу Chatwoot с OpenAI через посредник на Node.js (TypeScript).

### Правила:
1. Данное техническое задание каждый раз отправляется в новый контекст ChatGPT 4o.

## Для ChatGPT
1. Ты являешься разработчиком.
2. Используй данный документ для генерации кода приложения. 
3. Комментарии и логирование на русском языке.

### Цели документа 
1. Предоставить ChatGPT информацию о проекте, код которого ChatGPT генерирует по этому документу. 

### Технологический стек
1. node.js v22.16.0 на TypeScript

### Операционная система
1. Windows Server 2022 Standard

### Требования к импортам
1. Все необходимые модули должны быть импортированы явно в начале каждого файла.
2. Использовать именованный экспорт и импорт.
3. В коде не должно быть неопределённых ссылок на функции или модули.

### Запрещенные нативные метода JavaScript:
1. console.log и в иерархии прототипов.
2. console.error и в иерархии прототипов.

## Детальное описание файловой структуры

### test-01
Корень проекта.

### test-01/certs
Каталог файлов ssl сертификата.

### test-01/config
Каталог для конфигурационных файлов.

### test-01/config/logger.ts
Конфигурация логирования (использовать только winston)

Переменные окружения:
LOG_FILE_PATH - путь к файлу лога

Основной код модуля:
1. Конфигурирует и содержит всю логику работы с логами.
2. Вывод логов в консоль должен быть красивым.

Экспортные методы:

addLog(text: String): void
1. Кроме ошибок.
2. Проверяет наличие файла лога с именем express.log.
3. Создает его, если он отсутствует.
4. Добавляет строку сначала в конец файла, потом выводит в консоль.

addError(text: String): void
1. Только ошибки
2. Проверяет наличие файла лога с именем express.log.
3. Создает его, если он отсутствует.
4. Добавляет строку сначала в конец файла, потом выводит в консоль.

### test-01/certs/fullchain.pem
Сертификаты ssl.

### test-01/certs/privkey.pem
Приватный ключ SSL.

### test-01/logs
Каталог для файлов логов.

### test-01/routes
Каталог для файлов routes.

### test-01/logs/chatwoot.ts
Файл со всеми routes для chatwoot.
Каждый экспортный метод является route.

Экспортные методы:

Метод: webhook
1. Тип запроса: post
2. Логирует запрос.
3. Отвечает http статусом 200.

### test-01/logs/test.ts
Файл со всеми routes для test.
Каждый экспортный метод является route.

Экспортные методы:

Метод: test
1. Тип запроса: get
2. Генерирует синтетическое исключение для целей тестирования с вероятностью 1 раз из 4.
3. Логирует запрос.
4. Отвечает http статусом 200.

### test-01/.env
Переменные окружения.

OPENAI_API_KEY=
OPENAI_ASSISTANT_ID=
CHATWOOT_API_TOKEN=
CHATWOOT_ACCOUNT_ID=
CHATWOOT_BASE_URL=
LOG_FILE_PATH=

### test-01/server.ts
Точка входа приложения и код всего приложения.

Подключение модулей:
1. dotenv - подключение и загрузка переменных из файла .env
2. fs - подключение
3. https - подключение
4. express - подключение

Основной код модуля:
1. Запуск веб сервера на порту 443 используя сертификаты.
2. Подключение route все routes из каталога routes, упрости имя метода.
3. Подключение обработчика ошибок.
Перехватывает любую ошибку и добавляет ошибку в лог.

